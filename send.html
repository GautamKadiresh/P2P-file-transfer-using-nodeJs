<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
         <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
        <title>Send Files</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Send Files</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		.x{border: 1px solid blue;
			text-align: center;
			padding: 20px;
		  }
		.col-lg-3{border : 1px solid blue;}
		.col-lg-6{border : 1px solid blue;}
		a,h4{font-size: large;
                padding: 10px;
                height:40px;}
	</style>

    </head>
    <body>

        <h1 id = "a" style="text-align: center">SEND FILES</h1>
	
	<form class="x" name="myForm"  onsubmit="return validateForm()" method = "POST" style = "font-size: 25px;">
 	 Enter file name with the path: <input type="text" name="fname" >
 	 <input type="submit" value="Submit" >
	<br>ex: E:\files\xyz.txt<br>For multiple files in one link please zip them and send as a single .zip file.
	</form><br/>
	    
		<div id = x style="border: 1px solid blue margin-left: 01vw;" >			
		</div>


<script>
var j = <%- JSON.stringify(j) %>;
function validateForm() {
  var x = document.forms["myForm"]["fname"].value;
  if (x == "") {
    alert("Name must be filled out");
    return false;
  }
var i,k;
for ( i=0;i< x.length; i++) {
  if (x[i]==='\\'){k=i}
}
var y =x.slice(k+1);
j[y]=x;
update();
}

function update () {
var o= document.getElementById("x");
    var child = o.lastElementChild;  
        while (child) { 
            o.removeChild(child); 
            child = o.lastElementChild; 
        }
var e= document.createElement("div");
e.className="row";
var filename = document.createElement("h4");
        filename.innerHTML = "File Name";
	filename.style = "color: black; font-size: 40px;";
var filepath = document.createElement("h4");
        filepath.innerHTML = "File Path";
	filepath.style = "color: black; font-size: 40px;";
var link = document.createElement("h4");
        link.innerHTML = "Shareable Link";
	link.style = "color: black; font-size: 40px;";
var div1=	document.createElement("div");
	div1.className="col-lg-3";
div1.appendChild(filename);
var div2=	document.createElement("div");
	div2.className="col-lg-3";
div2.appendChild(filepath);
var div3=	document.createElement("div");
	div3.className="col-lg-6";
div3.appendChild(link);
e.appendChild(div1);
e.appendChild(div2);
e.appendChild(div3);
o.appendChild(e);


for (var key in j) {
  if (j.hasOwnProperty(key)) {var val = j[key];  
        var filename = document.createElement("h4");
        filename.innerHTML = key;
	var filepath = document.createElement("h4");
        filepath.innerHTML = val;
        var link = document.createElement("a");
  	link.innerHTML = "<%= ngrokurl %>/download/"+key;
  	link.href="<%= ngrokurl %>/download/"+key;
	link.style = "display: block; font-size: large;height:60px;" ;
   	

var e= document.createElement("div");
e.className="row";
var div1=	document.createElement("div");
	div1.className="col-lg-3";
div1.appendChild(filename);
var div2=	document.createElement("div");
	div2.className="col-lg-3";
div2.appendChild(filepath);
var div3=	document.createElement("div");
	div3.className="col-lg-6";
div3.appendChild(link);
e.appendChild(div1);
e.appendChild(div2);
e.appendChild(div3);
o.appendChild(e);

}}
};
update();

</script>
    </body>
</html>
